<% let ctx = {cat_title: category.Title, forum_title: forum.Title} %>
<div class="row mt-3 justify-content-center">
    <div class="col-md-8 col-sm-8">
        <h2> <%=forum.Title + "  /  " + category.Title %></h2>
    </div>
    <%= if ( current_user) { %>
    <div class="col-md-4 col-sm-4 text-right">
        <a href="<%= topicCreatePath(ctx) %>" class="btn btn-primary btn-sm m-0"><%= icon("pencil-fill",1,1) %> <%=  t("category-new-topic") %></a>
    </div>
    <% } %>
</div>
<div class="row justify-content-end">
    <div class="col-md-7">
        <%= paginator(pagination) %>
    </div>
    <div class="col-md-5 text-right">
        <%= partial("pagination-perpage.plush.html", {plural: downcase(t("app-topics")), perPage: [10,15,25]}) %>
    </div>
</div>
<div class="row">
    <div class="font-weight-bold col-5"><%= t("category-topic") %></div>
    <div class="font-weight-bold col-3 text-center"><%= t("category-users") %></div>
    <div class="font-weight-bold col-2 text-center"><%= t("category-replies") %></div>
    <div class="font-weight-bold col-2 text-center"><%= t("category-activity") %></div>
</div>

<%= if (len(topics) == 0)  {%>
    <h4><%= t("category-no-topics-found") %></h4>
<% } %>
<%= for (topic) in topics{
 let ctxTopic= {cat_title: category.Title, forum_title: forum.Title, tid: topic.ID}%>
<div class="row">
    <%= if (!topic.Deleted) { %>
    <hr class="col-12 col-sm-12" id="<%= topic.ID %>">
    <div class="col-5">
        <a href="<%= topicGetPath( ctxTopic ) %>" class="text-secondary">
            <%= topic.Title %>
        </a>
    </div>
    <div class="col-3 text-center">
        <%= for (author) in topic.Authors() { %>
        <span class="text-secondary">
			<%= avatar(derefUser(author)) %>
		</span>
        <% } %>
    </div>
    <div class="col-2 text-center"><%= len(topic.Replies) %></div>
    <div class="col-2 text-center"><%= timeSince(topic.LastUpdate())  %></div>
    <% } %>
</div>
<% } %>

<hr class="col-md-12 col-sm-12">
<div class="row justify-content-center">
    <div class="pagination-lg">
        <%= paginator(pagination) %>
    </div>

</div>
<div class="row justify-content-center">
    <%= partial("pagination-perpage.plush.html", {plural: downcase(t("app-topics")), perPage: [10,15,25]}) %>
</div>

